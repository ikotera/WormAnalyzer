function handles = createGUI(handles, hFunctions, smallScreen, modeImage)


% Font type
fName = 'Meiryo UI';        
if smallScreen
    fSize = 7;
else
    fSize = 9;
end

positions = getPositionsUI(smallScreen);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Figure

handles.fig = figure(                                   ...
    'Units',        'pixels',                           ...
    'Position',     positions.fig,                      ...
    'Toolbar',      'figure',                           ...
    'Numbertitle',  'off',                              ...
    'Renderer',     'painters',                         ...
    'CloseRequestFcn', hFunctions.quitFile,             ...
    'KeyPressFcn', hFunctions.keyPressed); % added 140207

% Get java object of the figure and set the mouse wheel callback
warning('off','MATLAB:HandleGraphics:ObsoletedProperty:JavaFrame');
jFig = get(handles.fig, 'JavaFrame');
jCont = jFig.getFigurePanelContainer;
hCont = handle(jCont, 'CallbackProperties'); % Wrap the j-object with M-handle to avoid memory leak
set(hCont, 'MouseWheelMovedCallback', hFunctions.scrollByWheel);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Panels

% Image panel
handles.panelImage = uipanel(                           ...
    'Title',                'Image',                    ...
    'Parent',               handles.fig,                ...
    'Units',                'normalized',               ...
    'Position',             positions.panelImage,       ...
    'BackgroundColor',      get(handles.fig, 'Color'),  ...
    'FontName',             fName,                      ...
    'FontSize',             fSize);

% Control panel
handles.panelControl = uipanel(                         ...
    'Title',                'Control',                  ...
    'Parent',               handles.fig,                ...
    'Units',                'normalized',               ...
    'Position',             positions.panelControl,     ...
    'BackgroundColor',      get(handles.fig, 'Color'),  ...
    'FontName',             fName,                      ...
    'FontSize',             fSize);

% Menu panel
handles.panelMenu = uipanel(                            ...
    'Title',                'Menu',                     ...
    'Parent',               handles.fig,                ...
    'Units',                'normalized',               ...
    'Position',             positions.panelMenu,        ...
    'BackgroundColor',      get(handles.fig, 'Color'),  ...
    'FontName',             fName,                      ...
    'FontSize',             fSize);

% Tracking Option panel
handles.panelTrack = uipanel(                           ...
    'Title',                'Tracking Menu',            ...
    'Parent',               handles.fig,                ...
    'Units',                'normalized',               ...
    'Position',             positions.panelTrack,       ...
    'BackgroundColor',      get(handles.fig, 'Color'),  ...
    'FontName',             fName,                      ...
    'FontSize',             fSize);

% View panel
handles.panelView = uipanel(                            ...
    'Title',                'View',                     ...
    'Parent',               handles.fig,                ...
    'Units',                'normalized',               ...
    'Position',             positions.panelView,        ...
    'BackgroundColor',      get(handles.fig, 'Color'),  ...
    'FontName',             fName,                      ...
    'FontSize',             fSize);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Image panel objects

% Image axis
handles.axisImage = axes(                               ...
    'Parent',               handles.panelImage,         ... 
    'Units',                'pixel',                    ...
    'Position',             positions.axisImage,        ...
    'Color',                'White',                    ...
    'xtick',                [],                         ...
    'ytick',                []);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Control panel objects

% Neuron list

handles.listN = uicontrol(                              ...
    'Style',        'ListBox',                          ...
    'Parent',       handles.panelControl,               ...
    'Units',        'normalized',                       ...
    'Position',     positions.listN,                    ...
    'Max',          0,                                  ...
    'Min',          1);
% Event listener for the list box. Required for callbacks from another fig
addlistener(handles.listN, 'Value', 'PostSet', hFunctions.selectList);

% Z-level; Added 140116
handles.SelectZ = uicontrol(                            ...
    'Style',                'popupmenu',                ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.SelectZ,          ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'String',               '(Empty)',                  ...
    'Enable',               'off');

% Check box for synchronizing n-list and z-slider, added 140207
handles.checkSyncList = uicontrol(                      ...
    'String',               'Sync n-list & z',          ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.checkSyncList,    ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                1,                          ...
    'Enable',               'on');

% Event listener for the drop-down menu.
addlistener(handles.SelectZ, 'Value', 'PostSet', hFunctions.selectZ);

%--------------------------------------------------------------------------
% Control Panel - Push buttons

% Add a new neuron
handles.buttonAdd = uicontrol(                          ...
    'String',               'Add a neuron',             ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonAdd,        ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.addNeuron);

% Delete the selected neuron
handles.buttonDel = uicontrol(                          ...
    'String',               'Delete the neuron',        ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonDel,     ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.delNeuron);

% Rename the selected neuron
handles.buttonRename = uicontrol(                       ...
    'String',               'Rename the neuron',        ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonRename,  ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.renameNeuron);

%--------------------------------------------------------------------------
% Control Panel - Toggle buttons

% Toggle displaying segmented regions
handles.toggleSegm = uicontrol(                         ...
    'String',               'Display Region',           ...
    'Style',                'togglebutton',             ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.toggleSegm,       ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                0,                          ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.toggleClick);

% Toggle displaying neuron label
handles.toggleLabel = uicontrol(                        ...
    'String',               'Display Label',            ...
    'Style',                'togglebutton',             ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.toggleLabel,      ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                1,                          ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.toggleClick);

% Toggle displaying gradient vector field
handles.toggleGVF = uicontrol(                          ...
    'String',               'Display GVF',              ...
    'Style',                'togglebutton',             ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.toggleGVF,        ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                0,                          ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.toggleClick);


%--------------------------------------------------------------------------
% Control panel - Radio buttons

% Image Type Group

handles.optionType = uibuttongroup(                     ...
    'Title',                'Image Selection',          ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.optionType,       ...
    'BackgroundColor',      get(handles.fig, 'Color'),  ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'SelectionChangeFcn',   hFunctions.optionChanged);

handles.option1 = uicontrol(                            ...
    'String',               'Image 1',                  ...
    'Style',                'Radio',                    ...
    'Parent',               handles.optionType,         ...
    'Units',                'normalized',               ...
    'Position',             positions.option1,          ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off');

handles.option2 = uicontrol(                            ...
    'String',               'Image 2',                  ...
    'Style',                'Radio',                    ...
    'Parent',               handles.optionType,         ...
    'Units',                'normalized',               ...
    'Position',             positions.option2,          ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off');

handles.option3 = uicontrol(                            ...
    'String',               'RGB Merge',                ...
    'Style',                'Radio',                    ...
    'Parent',               handles.optionType,         ...
    'Units',                'normalized',               ...
    'Position',             positions.option3,          ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off');

handles.option4 = uicontrol(                            ...
    'String',               'Z & RGB Merge',            ...
    'Style',                'Radio',                    ...
    'Parent',               handles.optionType,         ...
    'Units',                'normalized',               ...
    'Position',             positions.option4,          ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off');
%------------------------------RG--------------------------------------------
% Control panel - Flip images; Added 140130

% Flip image up-down
handles.checkFlipUD = uicontrol(                        ...
    'String',               'Flip image U-D',           ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.checkFlipUD,      ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                0,                          ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.toggleClick);

% Flip image right-left
handles.checkFlipLR = uicontrol(                        ...
    'String',               'Flip image L-R',           ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.checkFlipLR,      ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                0,                          ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.toggleClick);

%--------------------------------------------------------------------------
% Control panel - Merge neurons

handles.textA = uicontrol(                              ...
    'String',               'into',                     ...
    'Style',                'text',                     ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.textA,            ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'HorizontalAlignment',  'left',                     ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off');

% Merge the selected neurons
handles.buttonMerge = uicontrol(                        ...
    'String',               'Merge',                    ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonMerge,      ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.mergeNeuron);

% Neuron 1
handles.selectNeuron1 = uicontrol(                      ...
    'Style',                'popupmenu',                ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.selectNeuron1,    ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'String',               '(Empty)',                  ...
    'Enable',               'off');

% Neuron 2
handles.selectNeuron2 = uicontrol(                      ...
    'Style',                'popupmenu',                ...
    'Parent',               handles.panelControl,       ...
    'Units',                'normalized',               ...
    'Position',             positions.selectNeuron2,    ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'String',               '(Empty)',                  ...
    'Enable',               'off');

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Menu objects

% Open ICE file (.ice)
handles.buttonOpen = uicontrol(                         ...
    'String',               'Open',                     ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonOpen,       ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.openFile);

% Change Image Mode
switch modeImage
    case 'map'
        va = 1;
    case 'RAM'
        va = 2;
    case 'uint16'
        va = 3;
end
handles.selectModeImage = uicontrol(                    ...
    'String',               {'map', 'RAM', 'uint16'},   ...
    'Value',                va,                         ...
    'Style',                'popupmenu',                ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.selectModeImage,  ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.changeModeImage);

% Image Registration
handles.buttonRegister = uicontrol(                     ...
    'String',               'Register Image',           ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonRegister,   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.registerImagesGateway);

% GPU check box
handles.checkGPU = uicontrol(                           ...
    'String',               'GPU Acceleration',         ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...    
    'Position',             positions.checkGPU,         ...
    'FontName',             fName,                      ...
    'FontSize',             fSize);

% Quit program
handles.buttonQuit = uicontrol(                         ...
    'String',               'Quit',                     ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonQuit,       ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.quitFile);

% Show time series
handles.buttonShow = uicontrol(                         ...
    'String',               'Show Time Series',         ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonShow,       ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.showTimeSeries);

% Save time series
handles.buttonSave = uicontrol(                         ...
    'String',               'Save Time Series',         ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonSave,       ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.saveTimeSeries);

% Save Analysis
handles.buttonSaveAnalysis = uicontrol(                 ...
    'String',               'Save Analysis',            ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonSaveAnalysis,...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.saveAnalysis);

% Save Analysis
handles.buttonLoadAnalysis = uicontrol(                 ...
    'String',               'Load Analysis',            ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonLoadAnalysis,...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.loadAnalysis);

% Export Movie
handles.buttonMovie = uicontrol(                        ...
    'String',               'Make Movie',               ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonMovie,      ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.makeMovieGateway);

% Window Size
handles.menuSizeWindow = uicontrol(                     ...
    'String',               {'Large Screen', 'Small Screen'},        ...
    'Style',                'popupmenu',                ...
    'Value',                smallScreen+1,              ...
    'Parent',               handles.panelMenu,          ...
    'Units',                'normalized',               ...
    'Position',             positions.menuSizeWindow,   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Callback',             hFunctions.changeSizeWindow);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Tracking Option panel objects

handles.buttonSeeds = uicontrol(                        ...
    'String',               'Obtain initial points',    ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelTrack,         ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonSeeds,      ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.getSeedsGateway);

handles.buttonTrackAll = uicontrol(                     ...
    'String',               'Track All',                ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelTrack,         ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonTrackAll,   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.trackAllGateway);

handles.buttonTrackSel = uicontrol(                     ...
    'String',               'Track Selected',           ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelTrack,         ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonTrackSel,   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'off',                      ...
    'Callback',             hFunctions.trackSelGateway);

handles.checkRegister = uicontrol(                      ...
    'String',               'Register Images',          ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelTrack,         ...
    'Units',                'normalized',               ...
    'Position',             positions.checkRegister,    ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                0,                          ...
    'Enable',               'off');

handles.check3D = uicontrol(                            ...
    'String',               'Track in 3D Space',        ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelTrack,         ...
    'Units',                'normalized',               ...
    'Position',             positions.check3D,          ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                0,                          ...
    'Enable',               'off');

handles.checkAllZ = uicontrol(                          ...
    'String',               'For all z-levels',         ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelTrack,         ...
    'Units',                'normalized',               ...
    'Position',             positions.checkAllZ,        ...
    'BackgroundColor',      get(handles.fig,'Color'),   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Value',                1,                          ...
    'Enable',               'off');

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% View Option panel objects

% Check box for R channel display 140320
handles.checkR = uicontrol(                      ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelView,       ...
    'Units',                'normalized',               ...
    'Position',             positions.checkR,    ...
    'BackgroundColor',      get(handles.fig, 'Color'),   ...
    'Value',                1,                          ...
    'Enable',               'on', ...
    'Callback',             {hFunctions.toggleRGB, 'R'});

% Check box for G channel display 140320
handles.checkG = uicontrol(                      ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelView,       ...
    'Units',                'normalized',               ...
    'Position',             positions.checkG,    ...
    'BackgroundColor',      get(handles.fig, 'Color'),   ...
    'Value',                1,                          ...
    'Enable',               'on', ...
    'Callback',             {hFunctions.toggleRGB, 'G'});

% Check box for B channel display 140320
handles.checkB = uicontrol(                      ...
    'Style',                'checkbox',                 ...
    'Parent',               handles.panelView,       ...
    'Units',                'normalized',               ...
    'Position',             positions.checkB,    ...
    'BackgroundColor',      get(handles.fig, 'Color'),   ...
    'Value',                1,                          ...
    'Enable',               'on', ...
    'Callback',             {hFunctions.toggleRGB, 'B'});

% Toggle button for movie playback
[path, ~, ~] = fileparts(which(mfilename));  % Get the path of the m-file executing
pathIconPlay = [path, '\icons\play.gif'];
jicon = javax.swing.ImageIcon(pathIconPlay);
jButtonPlay = javax.swing.JToggleButton(jicon);
[handles.jButtonPlay, handles.buttonPlay] = javacomponent(jButtonPlay, [], handles.panelView);
set(handles.buttonPlay, 'Unit', 'normalized', 'Position', positions.buttonPlay);
set(handles.jButtonPlay, 'MouseReleasedCallback', {hFunctions.playICEGateway, 'play'});

% Toggle button for speeding up the playback
pathIconFaster = [path, '\icons\forward.gif'];
jicon = javax.swing.ImageIcon(pathIconFaster);
jButtonFaster = javax.swing.JButton(jicon);
[handles.jButtonFaster, handles.buttonFaster] = javacomponent(jButtonFaster, [], handles.panelView);
set(handles.buttonFaster, 'Unit', 'normalized', 'Position', positions.buttonFaster);
set(handles.jButtonFaster, 'MouseReleasedCallback', {hFunctions.playICEGateway, 'faster'});

% Toggle button for slowing down the playback
pathIconSlower = [path, '\icons\backward.gif'];
jicon = javax.swing.ImageIcon(pathIconSlower);
jButtonSlower = javax.swing.JButton(jicon);
[handles.jButtonSlower, handles.buttonSlower] = javacomponent(jButtonSlower, [], handles.panelView);
set(handles.buttonSlower, 'Unit', 'normalized', 'Position', positions.buttonSlower);
set(handles.jButtonSlower, 'MouseReleasedCallback', {hFunctions.playICEGateway, 'slower'});

handles.buttonAutoscale = uicontrol(                     ...
    'String',               'Autoscale',                ...
    'Style',                'pushbutton',               ...
    'Parent',               handles.panelView,         ...
    'Units',                'normalized',               ...
    'Position',             positions.buttonAutoscale,   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'on',                      ...
    'Callback',             hFunctions.autoscaleRGB);

handles.menuDepthColorR = uicontrol(                     ...
    'String',               {'16 bit', '14 bit', '12 bit', '10 bit', '8 bit'}, ...
    'Style',                'popupmenu',               ...
    'Value',                1, ...
    'Parent',               handles.panelView,         ...
    'Units',                'normalized',               ...
    'Position',             positions.menuDepthColorR,   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'on',                      ...
    'Callback',             {hFunctions.changeDepthColor, 1});

handles.menuDepthColorG = uicontrol(                     ...
    'String',               {'16 bit', '14 bit', '12 bit', '10 bit', '8 bit'}, ...
    'Style',                'popupmenu',               ...
    'Value',                1, ...
    'Parent',               handles.panelView,         ...
    'Units',                'normalized',               ...
    'Position',             positions.menuDepthColorG,   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'on',                      ...
    'Callback',             {hFunctions.changeDepthColor, 2});

handles.menuDepthColorB = uicontrol(                     ...
    'String',               {'16 bit', '14 bit', '12 bit', '10 bit', '8 bit'}, ...
    'Style',                'popupmenu',               ...
    'Value',                1, ...
    'Parent',               handles.panelView,         ...
    'Units',                'normalized',               ...
    'Position',             positions.menuDepthColorB,   ...
    'FontName',             fName,                      ...
    'FontSize',             fSize,                      ...
    'Enable',               'on',                      ...
    'Callback',             {hFunctions.changeDepthColor, 3});

end

